<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>AUI快速完成布局</title>
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <style type="text/css">
    .aui-content-padded {
        padding: 0.75rem;
        background-color: #ffffff;
        margin-top: 0.75rem;
    }
    </style>
</head>
<body>

    
     <div class="aui-searchbar" id="search">
     
     <label>姓名</label>  <div class="aui-searchbar-input aui-border-radius">
                   
            <input type="search" placeholder="姓名" id="search-input">
            <div class="aui-searchbar-clear-btn">
                <i class="aui-iconfont aui-icon-close"></i>
            </div>
        </div>
       
             
       <label>手机号码</label> <div class="aui-searchbar-input aui-border-radius">
                   
            <input type="search" placeholder="手机号码" id="search-input">
            <div class="aui-searchbar-clear-btn">
                <i class="aui-iconfont aui-icon-close"></i>
            </div>
        </div>             
       
        <div class="aui-searchbar-btn" tapmode>取消</div>
    </div>
    <section class="aui-content-padded">
        更新说明：取消了搜索条的绝对定位。增加清除按钮
    </section>
    <section class="aui-content-padded">
        要搜索的内容为：<span class="aui-text-info" id="search-keywords"></span>
    </section>
</body>
<script type="text/javascript" src="../js/api.js" ></script>
<script type="text/javascript">
    apiready = function(){
        api.parseTapmode();
    }
    //div
   // var searchBar = document.querySelector(".aui-searchbar");
   // var searchBarInputName = document.querySelector(".aui-searchbar input");
   // var searchBarInputPhone = document.querySelector(".");
    //取消按钮
   // var searchBarBtn = document.querySelector(".aui-searchbar .aui-searchbar-btn");
   // var searchBarClearBtn = document.querySelector(".aui-searchbar .aui-searchbar-clear-btn");
   var searchBar = document.querySelector(".aui-searchbar"); 
   var input = document.getElementById("search-input");
   var searchBarBtn = document.querySelector(".aui-searchbar .aui-searchbar-btn");
   var searchBarClearBtn = document.querySelector(".aui-searchbar .aui-searchbar-clear-btn");
   if(searchBar){
	   input.onclick = function(){
            searchBarBtn.style.marginRight = 0;
        }
        input.oninput = function(){
            if(this.value.length){
                searchBarClearBtn.style.display = 'block';
                searchBarBtn.classList.add("aui-text-info");
                searchBarBtn.textContent = "搜索";
            }else{
                searchBarClearBtn.style.display = 'none';
                searchBarBtn.classList.remove("aui-text-info");
                searchBarBtn.textContent = "取消";
            }
        }        
    }          
    searchBarClearBtn.onclick = function(){
        this.style.display = 'none';
        input.value = '';
        searchBarBtn.classList.remove("aui-text-info");
        searchBarBtn.textContent = "取消";
    }
    //点击搜索
    searchBarBtn.onclick = function(){
        var keywords = searchBarInput.value;
        //
        if(keywords.length){
            searchBarInput.blur();
            document.getElementById("search-keywords").textContent = keywords;
        }else{
            this.style.marginRight = "-"+this.offsetWidth+"px";
            searchBarInput.value = '';
            searchBarInput.blur();
        }
    }
</script>
</html>